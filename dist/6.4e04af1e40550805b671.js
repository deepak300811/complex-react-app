(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{216:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(8),s=a(2),o=a.n(s),r=a(4),i=a(3),u=a(11),m=a(105),d=a.n(m),f=a(19),p=a(18),E=a(6),b=a(14);t.default=Object(r.g)((function(e){const t=Object(n.useContext)(E.a),a=Object(n.useContext)(b.a),[s,m]=Object(n.useState)(!0),[h,g]=Object(n.useState)(),{id:w}=Object(r.f)();if(Object(n.useEffect)(()=>{const e=o.a.CancelToken.source();return async function(){await o.a.get("/post/"+w,{cancelToken:e.token}).then(e=>{console.log("SinglePost=",e.data),g(e.data),m(!1)}).catch(e=>{console.log("error=",e)})}(),()=>{e.cancel()}},[w]),!s&&!h)return l.a.createElement(p.a,null);if(s)return l.a.createElement(c.a,{title:"..."},l.a.createElement(u.a,null));const y=new Date(h.createdDate),N=`${y.getMonth()+1}/${y.getDate()}/${y.getFullYear()}`;return l.a.createElement(c.a,{title:h.title},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("h2",null,h.title),!!t.loggedIn&&t.user.username===h.author.username&&l.a.createElement("span",{className:"pt-2"},l.a.createElement(i.b,{to:`/post/${h._id}/edit`,"data-tip":"Edit","data-for":"edit",className:"text-primary mr-2"},l.a.createElement("i",{className:"fas fa-edit"})),l.a.createElement(f.a,{id:"edit",className:"custom-tooltip"})," ",l.a.createElement("a",{className:"delete-post-button text-danger","data-tip":"Delete","data-for":"delete",onClick:async function(){window.confirm("Do you really want to delete this post?")&&await o.a.delete("/post/"+w,{data:{token:t.user.token}}).then(n=>{"Success"===n.data&&(a({type:"FLASH_MESSAGES",value:"Post deleted Successfully!"}),e.history.push("/profile/"+t.user.username))}).catch(e=>{console.log("error while deleting=",e)})}},l.a.createElement("i",{className:"fas fa-trash"})),l.a.createElement(f.a,{id:"delete",className:"custom-tooltip"}))),l.a.createElement("p",{className:"text-muted small mb-4"},l.a.createElement(i.b,{to:"/profile/"+h.author.username},l.a.createElement("img",{className:"avatar-tiny",src:h.author.avatar})),"Posted by"," ",l.a.createElement(i.b,{to:"/profile/"+h.author.username},h.author.username)," ","on ",N),l.a.createElement("div",{className:"body-content"},l.a.createElement(d.a,{source:h.body})))}))}}]);